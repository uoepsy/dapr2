<!DOCTYPE html>
<html lang="en"><head>
<script src="dapr2_11_ixn_nc_files/libs/clipboard/clipboard.min.js"></script>
<script src="dapr2_11_ixn_nc_files/libs/quarto-html/tabby.min.js"></script>
<script src="dapr2_11_ixn_nc_files/libs/quarto-html/popper.min.js"></script>
<script src="dapr2_11_ixn_nc_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="dapr2_11_ixn_nc_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dapr2_11_ixn_nc_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="dapr2_11_ixn_nc_files/libs/quarto-html/quarto-syntax-highlighting-89ef1ee790bdc269b52a829279c5ce0e.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.24">

  <meta name="author" content="Elizabeth Pankratz (elizabeth.pankratz@ed.ac.uk)">
  <title>Mean-centering and numeric/categorical interactions</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="dapr2_11_ixn_nc_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="dapr2_11_ixn_nc_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #1f1c1b;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #1f1c1b; } /* Normal */
    code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
    code span.an { color: #ca60ca; } /* Annotation */
    code span.at { color: #0057ae; } /* Attribute */
    code span.bn { color: #b08000; } /* BaseN */
    code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
    code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #924c9d; } /* Char */
    code span.cn { color: #aa5500; } /* Constant */
    code span.co { color: #898887; } /* Comment */
    code span.cv { color: #0095ff; } /* CommentVar */
    code span.do { color: #607880; } /* Documentation */
    code span.dt { color: #0057ae; } /* DataType */
    code span.dv { color: #b08000; } /* DecVal */
    code span.er { color: #bf0303; text-decoration: underline; } /* Error */
    code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
    code span.fl { color: #b08000; } /* Float */
    code span.fu { color: #644a9b; } /* Function */
    code span.im { color: #ff5500; } /* Import */
    code span.in { color: #b08000; } /* Information */
    code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
    code span.op { color: #ca60ca; } /* Operator */
    code span.ot { color: #006e28; } /* Other */
    code span.pp { color: #006e28; } /* Preprocessor */
    code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #ff5500; } /* SpecialString */
    code span.st { color: #bf0303; } /* String */
    code span.va { color: #0057ae; } /* Variable */
    code span.vs { color: #bf0303; } /* VerbatimString */
    code span.wa { color: #bf0303; } /* Warning */
  </style>
  <link rel="stylesheet" href="dapr2_11_ixn_nc_files/libs/revealjs/dist/theme/quarto-53a9c49a12a3ad833bd88c7bb89b20b5.css">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-attribution/attribution.css" rel="stylesheet">
  <link href="dapr2_11_ixn_nc_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
  $(document).ready(function() {
      $('.cell').each(function() {
          let highlightLines = $(this).attr('data-output-line-numbers');
          if (highlightLines) {
              let lines = highlightLines.split(',').map(x => parseInt(x));
              $(this).find('.cell-output-stdout pre code').html(function(_, html) {
                  return html.split('\n').map((line, index) => {
                      if (lines.includes(index + 1)) {
                          return '<span style="background-color: #D0D8FC;">' + line + '</span>';
                      } else {
                          return line;
                      }
                  }).join('\n');
              });
          }
      });
  });
  </script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#BF1932" class="quarto-title-block center">
  <h1 class="title">Mean-centering and numeric/categorical interactions</h1>
  <p class="subtitle"><br>Data Analysis for Psychology in R 2</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Elizabeth Pankratz (elizabeth.pankratz@ed.ac.uk) 
</div>
        <p class="quarto-title-affiliation">
            <br>Department of Psychology<br>University of Edinburgh<br>2025–2026
          </p>
    </div>
</div>

</section>
<section id="course-overview" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Course Overview</h1>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<table style="border: 1px solid black;>
  <tr style=" padding:="" 0="" 1em="" 1em;"="">
    <tbody><tr><td rowspan="5" style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4;text-align:center;vertical-align: middle">
        <b>Introduction to linear Models</b></td>
    <td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Intro to linear regression</td>
  </tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Interpreting linear models</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Testing individual predictors</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Model testing &amp; comparison</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Linear model analysis</td></tr>

  <tr style="padding: 0 1em 0 1em;">
    <td rowspan="5" style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4;text-align:center;vertical-align: middle">
        <b>Analysing Experimental Studies</b></td>
    <td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Categorical predictors and dummy coding</td>
  </tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Effect coding and manual post-hoc contrasts</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Assumptions and diagnostics</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Bootstrapping and confidence intervals</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Categorical predictors: Practice analysis</td></tr>
</tbody></table>
</div><div class="column" style="width:50%;">
<table style="border: 1px solid black;>
  <tr style=" padding:="" 0="" 1em="" 1em;"="">
    <tbody><tr><td rowspan="5" style="border: 1px solid black;padding: 0 1em 0 1em;opacity:1;text-align:center;vertical-align: middle">
        <b>Interactions</b></td>
    <td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:1">
        <b>Mean-centering and numeric/categorical interactions</b></td>
  </tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Numeric/numeric interactions</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Categorical/categorical interactions</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Manual contrast interactions and multiple comparisons</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Interactions: Practice analysis</td></tr>

  <tr style="padding: 0 1em 0 1em;">
    <td rowspan="5" style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4;text-align:center;vertical-align: middle">
        <b>Advanced Topics</b></td>
    <td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Power analysis</td>
  </tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Binary logistic regression I</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Binary logistic regression II</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Logistic regression: Practice analysis</td></tr>
  <tr><td style="border: 1px solid black;padding: 0 1em 0 1em;opacity:0.4">
        Exam prep and course Q&amp;A</td></tr>
</tbody></table>
</div></div>
</section>

<section>
<section id="welcome-back-warm-up" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Welcome-back warm-up</h1>

</section>
<section id="welcome-back-warm-up-on-wooclap" class="slide level2">
<h2>Welcome-back warm-up on Wooclap</h2>
<p><br> <br></p>
<div class="hcenter" style="font-size: 150%;">
<p><code>wooclap.com</code>, enter code <code>BMLTOH</code></p>
</div>
</section>
<section id="this-weeks-learning-objectives" class="slide level2">
<h2>This week’s learning objectives</h2>
<p><br></p>
<div style="font-size: 125%;">
<div class="dapr2callout fragment">
<p>What does it mean to “mean-centre” a variable?</p>
</div>
<div class="dapr2callout fragment">
<p>How does mean-centering a predictor affect how we interpret the model’s intercept and other slope coefficients?</p>
</div>
<div class="dapr2callout fragment">
<p>How do we tell a model that an association between a predictor and the outcome <em>depends</em> on another predictor?</p>
</div>
<div class="dapr2callout fragment">
<p>How do interactions change what a model’s slope coefficients mean?</p>
</div>
</div>
</section></section>
<section>
<section id="why-did-we-practice-finding-the-intercept" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Why did we practice finding the intercept?</h1>

</section>
<section id="why-did-we-practice-finding-the-intercept-1" class="slide level2">
<h2>Why did we practice finding the intercept?</h2>
<!-- To notice that the intercept (the part of the line where x = 0) might be in lots of different places, compared to the actual data. -->
<p>Because what the intercept represents is very different when it’s in different places, relative to the data.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Right in the middle of the data:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-4-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Off to one side of the data:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-6-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div></div>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Totally outside of the data’s range:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-8-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Why does this matter?</strong></p>
</div></div>
</section>
<section id="sometimes-data-0-doesnt-make-sense" class="slide level2">
<h2>Sometimes data = 0 doesn’t make sense</h2>
<p>Imagine using people’s height in cm to predict their UK shoe size.</p>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-9-1.svg" class="quarto-figure quarto-figure-center r-stretch"><ul>
<li>A height of 0 cm is nonsense!</li>
<li>And the predicted shoe size of –10-ish is even more nonsense!</li>
</ul>
<p>In case like this, it’s useful to <em>transform</em> our variable, so that the value zero is more sensible/meaningful.</p>
</section>
<section id="change-what-data-0-represents" class="slide level2">
<h2>Change what data = 0 represents</h2>
<p>For example, if we make the value zero represent the <em>mean</em> height in our sample…</p>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-10-1.svg" class="quarto-figure quarto-figure-center r-stretch"><p>… then the line’s intercept represents <strong>the UK shoe size we’d expect for someone with average height: 7.</strong></p>
<p>That’s a LOT nicer than “for someone who’s 0 cm tall, their estimated shoe size is –10!”</p>
<p><strong>Transforming variables like this is a really useful tool to make the model’s coefficients make more sense.</strong></p>
</section>
<section id="where-we-are-in-the-analysis-workflow" class="slide level2">
<h2>Where we are in the analysis workflow</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/block3-flowchart-00.svg" class="quarto-figure quarto-figure-center" height="550"></p>
</figure>
</div>
</section>
<section id="a-new-tool-in-our-toolkit-mean-centering" class="slide level2">
<h2>A new tool in our toolkit: “Mean-centering”</h2>
<p>To mean-centre a variable means to <strong>transform it so that the mean of the centered version is zero.</strong></p>
<p><strong>An example variable, x1:</strong></p>
<div class="columns">
<div class="column" style="width:35%;">
<div class="hcenter">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: right;">x1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
</tr>
</tbody>
</table>
</div>
</div><div class="column" style="width:65%;">
<p>The mean of <strong>x1:</strong></p>
<p><span class="math display">\[
\begin{align}
=&amp; \frac{1 + 8 + 3 + 2 + 6}{5} \\
=&amp; ~\frac{20}{5}  \\
=&amp; ~4
\end{align}
\]</span></p>
</div></div>
<div class="fragment">
<p><strong>To mean-centre x1, subtract the mean of x1 from every observation:</strong></p>
<div class="columns">
<div class="column" style="width:35%;">
<div class="hcenter">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: right;">x1_c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1 – 4 = –3</td>
</tr>
<tr class="even">
<td style="text-align: right;">8 – 4 = 4</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3 – 4 = –1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2 – 4 = –2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6 – 4 = 2</td>
</tr>
</tbody>
</table>
</div>
</div><div class="column fragment" style="width:65%;">
<p>The mean of <strong>x1_c:</strong></p>
<p><span class="math display">\[
\begin{align}
=&amp; \frac{-3 + 4 - 1 - 2 + 2}{5} \\
=&amp; ~\frac{0}{5}  \\
=&amp; ~0
\end{align}
\]</span></p>
</div></div>
</div>
</section>
<section id="todays-data-wellbeing-and-time-outdoors" class="slide level2">
<h2>Today’s data: Wellbeing and time outdoors</h2>
<p><br></p>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-12-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="how-does-the-mean-centered-version-compare-to-the-original" class="slide level2">
<h2>How does the mean-centered version compare to the original?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Original (the predictor is not mean-centered):</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-13-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(outdoors1<span class="sc">$</span>outdoor_time) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.78</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>The predictor IS mean-centered:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-15-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(outdoors1<span class="sc">$</span>outdoor_time_c)<span class="sc">|&gt;</span><span class="fu">round</span>(<span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</div></div>
</section>
<section id="if-this-seems-a-little-familiar" class="slide level2">
<h2>If this seems a little familiar…</h2>
<p><br></p>
<p>Flashback to <a href="https://uoepsy.github.io/dapr2/2526/lectures/dapr2_02_lm2.html#/option-2-standardising-the-variables">standardising predictors in week 2</a>!</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/venn.svg" class="quarto-figure quarto-figure-center" height="400"></p>
</figure>
</div>
<ul>
<li><p>Mean-centered variables and standardised/z-scored variables <em>both</em> have a mean of 0.</p></li>
<li><p>But mean-centered variables still have their original standard deviation.</p></li>
</ul>
</section>
<section id="find-the-intercept-telepathy-edition" class="slide level2">
<h2>Find the intercept (telepathy edition)</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Original (not mean-centered):</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-17-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Mean-centered:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-18-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div></div>
<div class="dapr2callout">
<!-- style="font-size:125%;"} -->
<p><strong>When a predictor is mean-centered, the intercept gives us the outcome value at the mean value of the predictor.</strong></p>
<ul>
<li>This is because the intercept always tells us the outcome value when the predictor = 0.</li>
<li>And now 0 represents the predictor’s mean.</li>
</ul>
</div>
<!-- ## Vote: Which data is mean-centered? -->
<!-- NOTE: prob won't have time for this -->
<!-- [grid of four plots and thumbs up/down for each] -->
</section></section>
<section>
<section id="modelling-with-a-mean-centered-predictor" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Modelling with a mean-centered predictor</h1>

</section>
<section id="mean-centre-a-predictor-in-r" class="slide level2">
<h2>Mean-centre a predictor in R</h2>
<p>We have a couple ways to subtract the mean from each observation using <code>mutate()</code>.</p>
<p><br></p>
<p><strong>The first option:</strong> explicitly subtract the mean (I prefer this way).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="" aria-hidden="true" tabindex="-1"></a>outdoors1 <span class="ot">&lt;-</span> outdoors1 <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdoor_time_c =</span> outdoor_time <span class="sc">-</span> <span class="fu">mean</span>(outdoor_time)</span>
<span id="cb5-4"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p><strong>The second option:</strong> use <code>scale()</code> with <code>center = TRUE, scale = FALSE</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="" aria-hidden="true" tabindex="-1"></a>outdoors1 <span class="ot">&lt;-</span> outdoors1 <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdoor_time_c =</span> <span class="fu">scale</span>(outdoor_time, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-4"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>I don’t like using <code>scale()</code> for mean-centering because its output is slightly weirdly formatted, and this prevents us from using certain functions later.</p>
</section>
<section id="fit-the-model-after-mean-centering" class="slide level2">
<h2>Fit the model after mean-centering</h2>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time_c}) + \epsilon
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="" aria-hidden="true" tabindex="-1"></a>m_c <span class="ot">&lt;-</span> <span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time_c, <span class="at">data =</span> outdoors1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m_c)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wellbeing ~ outdoor_time_c, data = outdoors1)

Residuals:
    Min      1Q  Median      3Q     Max 
-6.2587 -3.1286 -0.5059  3.3094  8.6016 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     29.9444     0.8645  34.637   &lt;2e-16 ***
outdoor_time_c   2.7290     0.8830   3.091    0.005 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.408 on 24 degrees of freedom
Multiple R-squared:  0.2847,    Adjusted R-squared:  0.2549 
F-statistic: 9.552 on 1 and 24 DF,  p-value: 0.004998</code></pre>
</div>
</div>
</div>
</section>
<section id="intepreting-coefficients-after-mean-centering" class="slide level2">
<h2>Intepreting coefficients after mean-centering</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Coefficients:
                Estimate Std. Error t value Pr(&gt;|t|)    
 (Intercept)     29.9444     0.8645  34.637   &lt;2e-16 ***
 outdoor_time_c   2.7290     0.8830   3.091    0.005 ** </code></pre>
</div>
</div>
<p><br></p>
<p><strong><code>(Intercept)</code></strong></p>
<ul>
<li>When centered outdoor time is equal to zero, <strong>i.e., when outdoor time is at its mean value,</strong> the estimated mean wellbeing is 29.9.</li>
</ul>
<p><strong><code>outdoor_time_c</code></strong></p>
<ul>
<li>When centered outdoor time increases by one hour, wellbeing increases by about 2.7 points.</li>
<li>So:
<ul>
<li>one hour above the mean: 29.9 + 2.7 = 32.6</li>
<li>two hours above the mean: 29.9 + 2.7 + 2.7 = 35.3</li>
<li>…</li>
</ul></li>
</ul>
</section>
<section id="in-general-when-to-mean-centre" class="slide level2">
<h2>In general: When to mean-centre?</h2>
<p><br></p>
<p><strong>When would you mean-centre a predictor <code>x</code>?</strong></p>
<ul>
<li>When <code>x</code> doesn’t have a meaningful/interpretable zero point.
<ul>
<li>e.g., if modelling <code>shoesize ~ height</code>, a height of zero is nonsense. And so the predicted value for <code>shoesize</code> will probably also be nonsense.</li>
</ul></li>
<li>When you want the model’s intercept to represent the estimated outcome at the mean value of <code>x</code>.</li>
</ul>
<p><br></p>
<p><strong>When would you <em>not</em> mean-centre a predictor <code>x</code>?</strong></p>
<ul>
<li>When <code>x</code> has a meaningful/interpretable zero point.
<ul>
<li>e.g., if modelling <code>skill ~ years of training</code>, it makes sense to think about someone’s skills when they have zero years of training, that is, before their training begins.</li>
<li>e.g., if modelling <code>wellbeing ~ weeks in therapy</code>, it makes sense to think about someone’s wellbeing after zero weeks of therapy, that is, before they’ve done any therapy.</li>
</ul></li>
<li>When you want the model’s intercept to represent the estimated outcome for whatever <code>x = 0</code> already represents.</li>
</ul>
</section></section>
<section>
<section id="refresher-modelling-multiple-predictors" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Refresher: Modelling multiple predictors</h1>

</section>
<section id="todays-data-now-with-two-predictors" class="slide level2">
<h2>Today’s data: Now with two predictors</h2>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-25-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a>outdoors <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">12</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 x 3
   wellbeing envt   outdoor_time
       &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt;
 1      76.3 nature         6.22
 2      22.9 urban          2.73
 3      52.9 nature         4.58
 4      59.0 nature         5.36
 5      28.2 urban          3.53
 6      65.2 nature         5.63
 7      37.8 urban          5.65
 8      32.4 nature         2.61
 9      36.5 urban          5.94
10      28.4 urban          4.94
11      39.8 nature         3.40
12      32.7 urban          3.89</code></pre>
</div>
</div>
</div></div>
<div class="hcenter" style="font-size:125%;">
<p>How are <strong>outdoor time</strong> and <strong>environment</strong> associated with people’s <strong>wellbeing?</strong></p>
</div>
</section>
<section id="fit-the-model-nothing-is-centered-yet" class="slide level2">
<h2>Fit the model (nothing is centered yet!)</h2>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt})  + \epsilon
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time <span class="sc">+</span> envt, <span class="at">data =</span> outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m1)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wellbeing ~ outdoor_time + envt, data = outdoors)

Residuals:
     Min       1Q   Median       3Q      Max 
-15.1784  -4.1564  -0.6475   3.4551  20.1555 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   19.0465     4.9210   3.870 0.000334 ***
outdoor_time   7.7724     0.9493   8.188 1.34e-10 ***
envturban    -26.2466     1.9600 -13.391  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.895 on 47 degrees of freedom
Multiple R-squared:  0.8511,    Adjusted R-squared:  0.8447 
F-statistic: 134.3 on 2 and 47 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
</section>
<section id="interpreting-the-model" class="slide level2">
<h2>Interpreting the model</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-29-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<div style="font-size:90%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
 (Intercept)   19.0465     4.9210   3.870 0.000334 ***
 outdoor_time   7.7724     0.9493   8.188 1.34e-10 ***
 envturban    -26.2466     1.9600 -13.391  &lt; 2e-16 ***</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<p><strong>Intercept:</strong></p>
<ul>
<li>When <code>outdoor_time = 0</code> and <code>envt = 0</code>, the average <code>wellbeing</code> is about 19.
<ul>
<li><code>outdoor_time = 0</code> means zero hours spent outdoors.</li>
<li><code>envt = 0</code> means <code>envt = nature</code> (the reference level).</li>
</ul></li>
</ul>
<p><strong>Outdoor time:</strong></p>
<ul>
<li>When <code>envt = 0 = nature</code>, spending an additional hour outdoors is associated with an increase in wellbeing of about 8 points.</li>
</ul>
<p><strong>Environment:</strong></p>
<ul>
<li>When <code>outdoor_time = 0</code> hours spent outdoors, being in an urban environment is associated with a decrease in wellbeing of about 26 points.</li>
</ul>
</div></div>
</section>
<section id="two-core-ideas-for-multiple-regression" class="slide level2">
<h2>Two core ideas for multiple regression</h2>
<p><br> <br></p>
<div class="dapr2callout" style="font-size:150%;">
<p>A model’s intercept is the mean outcome <strong>when every predictor in the model is at zero.</strong></p>
</div>
<p><br></p>
<div class="dapr2callout" style="font-size:150%;">
<p>Each predictor’s slope represents the association of the given predictor with the outcome <strong>when every other predictor is at zero.</strong></p>
</div>
</section></section>
<section>
<section id="modelling-multiple-predictors-with-mean-centering" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Modelling multiple predictors with mean-centering</h1>

</section>
<section id="mean-centre-outdoor_time" class="slide level2">
<h2>Mean-centre <code>outdoor_time</code></h2>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="" aria-hidden="true" tabindex="-1"></a>outdoors <span class="ot">&lt;-</span> outdoors <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="at">outdoor_time_c =</span> outdoor_time <span class="sc">-</span> <span class="fu">mean</span>(outdoor_time)</span>
<span id="cb17-4"><a href="" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-5"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 x 4
  wellbeing envt   outdoor_time outdoor_time_c
      &lt;dbl&gt; &lt;fct&gt;         &lt;dbl&gt;          &lt;dbl&gt;
1      76.3 nature         6.22          1.35 
2      22.9 urban          2.73         -2.14 
3      52.9 nature         4.58         -0.285
4      59.0 nature         5.36          0.489
5      28.2 urban          3.53         -1.34 
6      65.2 nature         5.63          0.761</code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(outdoors<span class="sc">$</span>outdoor_time_c) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
</section>
<section id="visualise-the-mean-centered-data" class="slide level2">
<h2>Visualise the mean-centered data</h2>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-34-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="fit-the-model-with-mean-centered-predictor" class="slide level2">
<h2>Fit the model (with mean-centered predictor)</h2>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time_c}) + (\beta_2 \cdot \text{envt})  + \epsilon
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time_c <span class="sc">+</span> envt, <span class="at">data =</span> outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wellbeing ~ outdoor_time_c + envt, data = outdoors)

Residuals:
     Min       1Q   Median       3Q      Max 
-15.1784  -4.1564  -0.6475   3.4551  20.1555 

Coefficients:
               Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)     56.8936     1.4105  40.335  &lt; 2e-16 ***
outdoor_time_c   7.7724     0.9493   8.188 1.34e-10 ***
envturban      -26.2466     1.9600 -13.391  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.895 on 47 degrees of freedom
Multiple R-squared:  0.8511,    Adjusted R-squared:  0.8447 
F-statistic: 134.3 on 2 and 47 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
</section>
<section id="interpreting-the-model-with-mean-centering" class="slide level2">
<h2>Interpreting the model with mean-centering</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-37-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<div style="font-size:90%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Coefficients:
                Estimate Std. Error t value Pr(&gt;|t|)    
 (Intercept)     56.8936     1.4105  40.335  &lt; 2e-16 ***
 outdoor_time_c   7.7724     0.9493   8.188 1.34e-10 ***
 envturban      -26.2466     1.9600 -13.391  &lt; 2e-16 ***</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:40%;">
<p><strong>Intercept:</strong></p>
<ul>
<li>When <code>outdoor_time_c = 0</code> and <code>envt = 0</code>, the average <code>wellbeing</code> is about 57.
<ul>
<li><strong><code>outdoor_time_c = 0</code> means at the mean of time spent outdoors</strong></li>
<li><code>envt = 0</code> means <code>envt = nature</code> (the reference level).</li>
</ul></li>
</ul>
<p><strong>Outdoor time:</strong></p>
<ul>
<li>When <code>envt = 0 = nature</code>, spending an additional hour outdoors is associated with an increase in wellbeing of about 8 points.</li>
</ul>
<p><strong>Environment:</strong></p>
<ul>
<li>When <code>outdoor_time_c = 0</code>, so <strong>when outdoor time is at its mean,</strong> being in an urban environment is associated with a decrease in wellbeing of about 26 points.</li>
</ul>
</div></div>
</section></section>
<section>
<section id="but-this-model-is-not-quite-right-for-this-data" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>But: This model is not quite right for this data</h1>

</section>
<section id="this-model-is-not-quite-right-for-this-data" class="slide level2">
<h2>This model is not quite right for this data</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-39-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<!-- ::::{ style="font-size:90%;"} -->
<!-- ```{r echo=F} -->
<!-- cat(paste0(capture.output(summary(m1)), '\n')[9:13]) -->
<!-- ``` -->
<!-- :::: -->
</div><div class="column" style="width:40%;">
<ol type="1">
<li>This model assumes that <strong>whatever your environment,</strong> an extra hour of being outdoors improves your wellbeing by about 8.</li>
</ol>
<p><br></p>
<ol start="2" type="1">
<li>This model assumes that <strong>whatever your time spent outdoors,</strong> being in an urban environment reduces your wellbeing by about 26 points.</li>
</ol>
<p><br></p>
<p><strong>But these assumptions don’t totally match the data.</strong></p>
</div></div>
<div class="dapr2callout" style="font-size:125%">
<p>Back to Wooclap (code <code>JXOBYL</code>): <strong>This model fails to capture some patterns in the data. Can you try to put into words what it misses?</strong></p>
</div>
</section>
<section id="wouldnt-it-be-better-if" class="slide level2">
<h2>Wouldn’t it be better if…</h2>
<div class="r-stack">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-41-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-42-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<div class="fragment" style="font-size:120%;">
<p>What if the association between time outdoors and wellbeing could be different, <strong>depending on</strong> your environment?</p>
<ul>
<li>In nature, more time outdoors improves wellbeing <em>more</em> than in an urban environment.</li>
<li>In an urban environment, time outdoors still helps, but <em>less</em> than in nature.</li>
</ul>
</div>
</section></section>
<section>
<section id="depends-on-rightarrow-interactions" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>“Depends on” <span class="math inline">\(\rightarrow\)</span> Interactions</h1>

</section>
<section id="depends-on-rightarrow-interactions-1" class="slide level2">
<h2>“Depends on” <span class="math inline">\(\rightarrow\)</span> Interactions</h2>
<p>When the association between one predictor and the outcome <strong>depends on the value of another predictor</strong>, we are dealing with an <strong>interaction</strong> between predictors.</p>

<img data-src="figs/depends-on-11.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="how-do-we-tell-our-model-that-it-depends" class="slide level2">
<h2>How do we tell our model that “it depends”?</h2>
<p>We need an extra bit of information to tell us “how <em>much</em> does the association between outdoor time and wellbeing change between natural and urban environments”?</p>
<p>This information appears in the model as the product of the two original variables (that is, both original variables multiplied together.)</p>
<p><br></p>
<p>The previous model:</p>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt})  + \epsilon
\]</span></p>
<p>The updated model that includes an interaction:</p>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt}) + (\beta_3 \cdot \text{outdoor_time} \cdot \text{envt}) + \epsilon
\]</span></p>
<p><br></p>
<p>This updated model says that <code>wellbeing</code> is predicted by</p>
<ul>
<li>some amount of <code>outdoor_time</code></li>
<li>some amount of <code>envt</code></li>
<li>and a little addition to one of those amounts, depending on the value of the other variable.</li>
</ul>
<p><br></p>
<p>(Why multiplication? See appendix!)</p>
</section></section>
<section>
<section id="interactions-in-r" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Interactions in R</h1>

</section>
<section id="interactions-in-r-1" class="slide level2">
<h2>Interactions in R</h2>
<!-- The model with no interaction (the non-mean-centered version): -->
<!-- ```{r eval=F} -->
<!-- lm(wellbeing ~ outdoor_time + envt, data = outdoors) -->
<!-- ``` -->
<p><br></p>
<p>In R syntax, the interaction term is shown by a colon <code>:</code> between the two interacting predictors.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time <span class="sc">+</span> envt <span class="sc">+</span> outdoor_time<span class="sc">:</span>envt, <span class="at">data =</span> outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p>Because this can be a lot to write out, a shortcut is to use <code>*</code>:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time <span class="sc">*</span> envt, <span class="at">data =</span> outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<p>Both versions accomplish the exact same thing.</p>
</section>
<section id="fit-our-first-interaction-model" class="slide level2">
<h2>Fit our first interaction model</h2>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt}) + (\beta_3 \cdot \text{outdoor_time} \cdot \text{envt}) + \epsilon
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="" aria-hidden="true" tabindex="-1"></a>m3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time <span class="sc">*</span> envt, <span class="at">data =</span> outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wellbeing ~ outdoor_time * envt, data = outdoors)

Residuals:
     Min       1Q   Median       3Q      Max 
-10.0029  -2.9519  -0.4881   3.1881  11.2969 

Coefficients:
                       Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)             -3.3876     4.5651  -0.742  0.46183    
outdoor_time            12.2887     0.8982  13.682  &lt; 2e-16 ***
envturban               20.2899     6.5022   3.120  0.00312 ** 
outdoor_time:envturban  -9.5597     1.3067  -7.316 3.07e-09 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.738 on 46 degrees of freedom
Multiple R-squared:  0.9312,    Adjusted R-squared:  0.9267 
F-statistic: 207.4 on 3 and 46 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
<!-- https://uoepsy.github.io/usmr/2526/readings/15_interactions.html?panelset_002=example-22#fitting-interactions-in-r  -->
</section>
<section id="interpreting-coefficients-in-interaction-models" class="slide level2">
<h2>Interpreting coefficients in interaction models</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
 (Intercept)             -3.3876     4.5651  -0.742  0.46183    
 outdoor_time            12.2887     0.8982  13.682  &lt; 2e-16 ***
 envturban               20.2899     6.5022   3.120  0.00312 ** 
 outdoor_time:envturban  -9.5597     1.3067  -7.316 3.07e-09 ***</code></pre>
</div>
</div>
<div class="dapr2callout fragment">
<p><code>(Intercept)</code>: When all predictors are zero, the average wellbeing is about –3.</p>
<ul>
<li><code>outdoor_time = 0</code> means when zero hours are spent outdoors.</li>
<li><code>envt = 0</code> means <code>envt = nature</code> (the reference level).</li>
</ul>
</div>
<div class="dapr2callout fragment">
<p><code>outdoor_time</code>: <strong>Only</strong> when <code>envt = 0 = nature</code>, spending an additional hour outdoors is associated with an increase in wellbeing of about 12 points.</p>
</div>
<div class="dapr2callout fragment">
<p><code>envturban</code>: <strong>Only</strong> when <code>outdoor_time = 0</code> hours spent outdoors, being in an urban environment is associated with an increase in wellbeing of about 20 points.</p>
</div>
<div class="dapr2callout fragment">
<p><code>outdoor_time:envturban</code>: When we change environment from <code>natural</code> to <code>urban</code>, the <strong>association between <code>outdoor_time</code> and <code>wellbeing</code> changes</strong> by about –10.</p>
<ul>
<li>When <code>envt = natural</code>, the association is the one estimated above, 12 (the <code>outdoor_time</code> coef above).</li>
<li>When <code>envt = urban</code>, the association changes! 12 (<code>outdoor_time</code> coef) – 10 (interaction coef) = 2-ish.</li>
</ul>
</div>
<!-- https://uoepsy.github.io/usmr/2526/readings/15_interactions.html?panelset_002=example-22#interpretation  -->
<!-- Recall that when there is an interaction AB, the coefficients A and B are no longer _main effects_. Instead, they are _conditional effects_, conditional on the other being zero. -->
<!-- - simple slopes = slope of association between x and y at a specific value of interacting variable Z -->
</section>
<section id="investigating-interactions-with-probe_interaction" class="slide level2">
<h2>Investigating interactions with <code>probe_interaction()</code></h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="" aria-hidden="true" tabindex="-1"></a>m3_probe <span class="ot">&lt;-</span> <span class="fu">probe_interaction</span>(</span>
<span id="cb31-2"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> m3,</span>
<span id="cb31-3"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">pred =</span> outdoor_time,</span>
<span id="cb31-4"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">modx =</span> envt,</span>
<span id="cb31-5"><a href="" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval =</span> T</span>
<span id="cb31-6"><a href="" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="" aria-hidden="true" tabindex="-1"></a>m3_probe<span class="sc">$</span>simslopes</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>SIMPLE SLOPES ANALYSIS

Slope of outdoor_time when envt = nature: 

   Est.   S.E.   t val.      p
------- ------ -------- ------
  12.29   0.90    13.68   0.00

Slope of outdoor_time when envt = urban: 

  Est.   S.E.   t val.      p
------ ------ -------- ------
  2.73   0.95     2.88   0.01</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="" aria-hidden="true" tabindex="-1"></a>m3_probe<span class="sc">$</span>interactplot</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-51-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="a-visual-intuition-for-each-coefficient" class="slide level2">
<h2>A visual intuition for each coefficient</h2>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-53-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="a-visual-intuition-intercept" class="slide level2">
<h2>A visual intuition: <code>Intercept</code></h2>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-54-1.svg" class="quarto-figure quarto-figure-center r-stretch"><div class="dapr2callout">
<p><code>(Intercept)</code>: When all predictors are zero, the average wellbeing is about –3.</p>
<ul>
<li><code>outdoor_time = 0</code> means when zero hours are spent outdoors.</li>
<li><code>envt = 0</code> means <code>envt = nature</code> (the reference level).</li>
</ul>
</div>
</section>
<section id="a-visual-intuition-outdoor_time" class="slide level2">
<h2>A visual intuition: <code>outdoor_time</code></h2>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-55-1.svg" class="quarto-figure quarto-figure-center r-stretch"><div class="dapr2callout">
<p><code>outdoor_time</code>: <strong>Only</strong> when <code>envt = 0 = nature</code>, spending an additional hour outdoors is associated with an increase in wellbeing of about 12 points.</p>
</div>
</section>
<section id="a-visual-intuition-envturban" class="slide level2">
<h2>A visual intuition: <code>envturban</code></h2>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-56-1.svg" class="quarto-figure quarto-figure-center r-stretch"><div class="dapr2callout">
<p><code>envturban</code>: <strong>Only</strong> when <code>outdoor_time = 0</code> hours spent outdoors, being in an urban environment is associated with an increase in wellbeing of about 20 points.</p>
</div>
</section>
<section id="a-visual-intuition-outdoor_timeenvturban" class="slide level2">
<h2>A visual intuition: <code>outdoor_time:envturban</code></h2>

<img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-57-1.svg" class="quarto-figure quarto-figure-center r-stretch"><div class="dapr2callout">
<p><code>outdoor_time:envturban</code>: When we change environment from <code>natural</code> to <code>urban</code>, the association between <code>outdoor_time</code> and <code>wellbeing</code> changes by about –10.</p>
<p>To get the slope for <code>urban</code>, we add up the slope for <code>natural</code> and the interaction coefficient: 12 + (–10) = 2.</p>
</div>
</section></section>
<section>
<section id="changing-the-interpretation-by-mean-centering" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Changing the interpretation by mean-centering</h1>

</section>
<section id="changing-the-interpretation-by-mean-centering-1" class="slide level2">
<h2>Changing the interpretation by mean-centering</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Not mean-centered:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-58-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Mean-centered:</strong></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="dapr2_11_ixn_nc_files/figure-revealjs/unnamed-chunk-60-1.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- What will each coefficient mean when `outdoor_time` is mean-centered? -->
<!-- NOTE: If time, in future years, add a prediction activity here. -->
</section>
<section id="fit-the-new-model" class="slide level2">
<h2>Fit the new model</h2>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time_c}) + (\beta_2 \cdot \text{envt}) + (\beta_3 \cdot \text{outdoor_time_c} \cdot \text{envt}) + \epsilon
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="" aria-hidden="true" tabindex="-1"></a>m4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(wellbeing <span class="sc">~</span> outdoor_time_c <span class="sc">*</span> envt, <span class="at">data =</span> outdoors)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="fragment">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m4)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = wellbeing ~ outdoor_time_c * envt, data = outdoors)

Residuals:
     Min       1Q   Median       3Q      Max 
-10.0029  -2.9519  -0.4881   3.1881  11.2969 

Coefficients:
                         Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)               56.4513     0.9712  58.124  &lt; 2e-16 ***
outdoor_time_c            12.2887     0.8982  13.682  &lt; 2e-16 ***
envturban                -26.2602     1.3469 -19.496  &lt; 2e-16 ***
outdoor_time_c:envturban  -9.5597     1.3067  -7.316 3.07e-09 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.738 on 46 degrees of freedom
Multiple R-squared:  0.9312,    Adjusted R-squared:  0.9267 
F-statistic: 207.4 on 3 and 46 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</div>
</section>
<section id="interpreting-coefs-with-centering-interactions" class="slide level2">
<h2>Interpreting coefs with centering, interactions</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Coefficients:
                          Estimate Std. Error t value Pr(&gt;|t|)    
 (Intercept)               56.4513     0.9712  58.124  &lt; 2e-16 ***
 outdoor_time_c            12.2887     0.8982  13.682  &lt; 2e-16 ***
 envturban                -26.2602     1.3469 -19.496  &lt; 2e-16 ***
 outdoor_time_c:envturban  -9.5597     1.3067  -7.316 3.07e-09 ***</code></pre>
</div>
</div>
<div class="dapr2callout fragment">
<p><code>(Intercept)</code>: When all predictors are zero, the average wellbeing is about 56.</p>
<ul>
<li><strong><code>outdoor_time_c = 0</code> means when the average number of hours are spent outdoors</strong></li>
<li><code>envt = 0</code> means <code>envt = nature</code> (the reference level).</li>
</ul>
</div>
<div class="dapr2callout fragment">
<p><code>outdoor_time_c</code>: <strong>Only</strong> when <code>envt = 0 = nature</code>, spending an additional hour outdoors is associated with an increase in wellbeing of about 12 points.</p>
</div>
<div class="dapr2callout fragment">
<p><code>envturban</code>: <strong>Only</strong> when <code>outdoor_time_c = 0</code>, <strong>which represents the average number of hours spent outdoors,</strong> being in an urban environment is associated with an decrease in wellbeing of about 26 points.</p>
</div>
<div class="dapr2callout fragment">
<p><code>outdoor_time_c:envturban</code>: When we change environment from <code>natural</code> to <code>urban</code>, the <strong>association</strong> between <code>outdoor_time_c</code> and <code>wellbeing</code> changes by about –10.</p>
<ul>
<li>When <code>envt = natural</code>, the association is about 12 (the <code>outdoor_time_c</code> coef above).</li>
<li>When <code>envt = urban</code>, the association is about 12 – 10 = 2-ish.</li>
</ul>
</div>
<!-- ## In general: The impact of mean-centering on the slopes in interaction models -->
<!-- <br> -->
<!-- Imagine we have an interaction model `y ~ x1 * x2`. -->
<!-- <br> -->
<!-- We know that the coefficient for `x2` represents "the association between `x2` and `y` when `x1` is equal to zero". -->
<!-- <br> -->
<!-- **If we mean-centre `x1`, then the coefficient for `x2` "the association between `x2` and `y` when `x1` is at its average value".** -->
<!-- This is because in a mean-centered variable, zero represents that variable's average value. -->
<!-- <br> -->
<!-- FIXME in future years: if there's time in the session, could do visual intuitions here again -->
</section>
<section id="the-1-key-to-interpreting-every-linear-model-ever" class="slide level2">
<h2>The #1 key to interpreting every linear model ever</h2>
<p><br></p>
<div class="dapr2callout" style="font-size:135%">
<p><strong>For each predictor in your model, know what zero represents.</strong></p>
</div>
</section>
<section id="building-an-analysis-workflow-feat.-interactions" class="slide level2">
<h2>Building an analysis workflow, feat. interactions</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/block3-flowchart-01.svg" class="quarto-figure quarto-figure-center" height="650"></p>
</figure>
</div>
</section>
<section id="building-an-analysis-workflow-a-new-evolution" class="slide level2">
<h2>Building an analysis workflow: A new evolution</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="figs/block3-flowchart-02.svg" class="quarto-figure quarto-figure-center" height="925"></p>
</figure>
</div>
</section></section>
<section>
<section id="back-matter" class="title-slide slide level1 center" data-background-color="#BF1932">
<h1>Back matter</h1>

</section>
<section id="revisiting-this-weeks-learning-objectives" class="slide level2">
<h2>Revisiting this week’s learning objectives</h2>
<p><br></p>
<div class="dapr2callout">
<p><strong>What does it mean to “mean-centre” a variable?</strong></p>
<ul>
<li>Transform the variable so that its mean is equal to zero.</li>
<li>To mean-centre a variable, subtract that variable’s mean from every observation.</li>
</ul>
</div>
<div class="dapr2callout">
<p><strong>How does mean-centering a predictor affect how we interpret the model’s intercept and other slope coefficients?</strong></p>
<ul>
<li>The key idea: the mean of the predictor is represented by the number zero.</li>
<li>So in a model <code>y ~ x1_c</code>, the intercept represents the estimated outcome <code>y</code> <strong>when the predictor <code>x1_c</code> is at its mean of zero.</strong></li>
<li>If a model contains other predictors, e.g., <code>y ~ x1_c + x2</code>, then the coefficient for <code>x2</code> represents the association between <code>x2</code> and <code>y</code> when <code>x1_c</code> is at its mean of zero.</li>
</ul>
</div>
</section>
<section id="revisiting-this-weeks-learning-objectives-1" class="slide level2">
<h2>Revisiting this week’s learning objectives</h2>
<p><br></p>
<div class="dapr2callout">
<p><strong>How do we tell a model that an association between a predictor and the outcome <em>depends</em> on another predictor?</strong></p>
<ul>
<li>We include an interaction between those two predictors in the model.</li>
</ul>
</div>
<div class="dapr2callout">
<p><strong>How do interactions change what a model’s slope coefficients mean?</strong></p>
<ul>
<li>When a model includes an interaction, the slope coefficients must be interpreted as <strong>conditional effects:</strong> they only apply when the other interacting predictor is 0. (In other words, they are “conditional” on the other predictor being 0.)</li>
<li>For example, in a model like <code>y ~ x1 * x2</code>, the coefficient for <code>x1</code> tells us the association between <code>x1</code> and <code>y</code>, but only when <code>x2</code> is 0.</li>
<li>This is because the association between <code>x1</code> and <code>y</code> depends on <code>x2</code>. So the association between <code>x1</code> and <code>y</code> might be a different number when <code>x2</code> is 1, or 2, or …</li>
</ul>
</div>
</section>
<section id="this-week" class="slide level2">
<h2>This week</h2>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Tasks:</strong></p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figs/labs.svg" style="width:15.0%"></p>
</figure>
</div>
</div>
</div>
<p><strong>Attend your lab and work together on the exercises</strong></p>
</div><div class="column" style="width:50%;">
<p><strong>Support:</strong></p>
<p><br></p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figs/forum.svg" style="width:15.0%"></p>
</figure>
</div>
</div>
</div>
<p><strong>Help each other on the Piazza forum</strong></p>
</div></div>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figs/exam.svg" style="width:15.0%"></p>
</figure>
</div>
</div>
</div>
<p><strong>Complete the weekly quiz</strong></p>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="figs/oh.png" style="width:15.0%"></p>
</figure>
</div>
</div>
</div>
<p><strong>Attend office hours (see Learn page for details)</strong></p>
</div></div>
</section></section>
<section>
<section id="appendix" class="title-slide slide level1 appendix center" data-background-color="#BF1932" data-visibility="uncounted">
<h1>Appendix</h1>

</section>
<section id="why-multiplication" class="slide level2" data-visibility="uncounted">
<h2>Why multiplication?</h2>
<p><br></p>
<p>In the basic model without the interaction, the effect of <code>outdoor_time</code> on <code>wellbeing</code> is just <span class="math inline">\(\beta_1\)</span>, a single constant number.</p>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\underbrace{\beta_1}_{\text{effect of}\\ \text{outdoor}\\ \text{time}} \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt}) + \epsilon
\]</span> But if the effect of <code>outdoor_time</code> <em>depends</em> on <code>envt</code>, then the effect isn’t just a single constant number. It’s more like “some number plus some amount of <code>envt</code>”.</p>
<p>To represent “some amount of <code>envt</code>, let’s use <span class="math inline">\(\beta_3 \cdot \text{envt}\)</span>.</p>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\underbrace{(\overbrace{\beta_1}^{\text{some}\\ \text{number}} + \overbrace{\beta_3 \cdot \text{envt}}^{\text{some amount}\\ \text{of environment}})}_{\text{effect of outdoor time}} \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt}) + \epsilon
\]</span></p>
<p>And if you expand this expression by multiplying both <span class="math inline">\(\beta_1\)</span> and <span class="math inline">\(\beta_3 \cdot \text{envt}\)</span> by <span class="math inline">\(\text{outdoor_time}\)</span>, you get the final linear expression we use for this model:</p>
<p><span class="math display">\[
\text{wellbeing} = \beta_0 + (\beta_1 \cdot \text{outdoor_time}) + (\beta_2 \cdot \text{envt}) + (\beta_3 \cdot \text{outdoor_time} \cdot \text{envt}) + \epsilon
\]</span></p>
</section>
<section id="simple-slopes-for-the-no-interaction-not-centered-model" class="slide level2" data-visibility="uncounted">
<h2>Simple slopes for the no-interaction not-centered model</h2>
<p>The linear expression:</p>
<p><span class="math display">\[
\widehat{wellbeing} = \beta_0 + (\beta_1 \cdot outdoor\_time) + (\beta_2 \cdot envt) \\
\]</span></p>
<p>Substituting in the coefficient values:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(m1) <span class="sc">|&gt;</span> <span class="fu">round</span>(<span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code> (Intercept) outdoor_time    envturban 
        19.0          7.8        -26.2 </code></pre>
</div>
</div>
<p><span class="math display">\[
\widehat{wellbeing} = 19    + (7.8 \cdot outdoor\_time)     + (-26.2 \cdot envt) \\
\]</span></p>
<p>When <span class="math inline">\(envt = 0\)</span> (nature):</p>
<p><span class="math display">\[
\begin{align}
\widehat{wellbeing}_{nature} &amp;= 19    + (7.8 \cdot outdoor\_time)     + (-26.2 \cdot 0) \\
\widehat{wellbeing}_{nature} &amp;= 19    + (7.8 \cdot outdoor\_time)      \\
\end{align}
\]</span></p>
<p>When <span class="math inline">\(envt = 1\)</span> (urban):</p>
<p><span class="math display">\[
\begin{align}
\widehat{wellbeing}_{urban} &amp;= 19    + (7.8 \cdot outdoor\_time)     + (-26.2 \cdot 1) \\
\widehat{wellbeing}_{urban} &amp;= 19 - 26.2   + (7.8 \cdot outdoor\_time)      \\
\widehat{wellbeing}_{urban} &amp;= 9   + (7.8 \cdot outdoor\_time)      \\
\end{align}
\]</span></p>
</section>
<section id="simple-slopes-for-the-interaction-non-centered-model" class="slide level2" data-visibility="uncounted">
<h2>Simple slopes for the interaction (non-centered) model</h2>
<div style="font-size:80%">
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(m3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>           (Intercept)           outdoor_time              envturban 
             -3.387579              12.288744              20.289905 
outdoor_time:envturban 
             -9.559714 </code></pre>
</div>
</div>
</div>
<p><span class="math display">\[
\begin{align}
\widehat{wellbeing} &amp;= \beta_0 + (\beta_1 \cdot out) + (\beta_2 \cdot envt) + (\beta_3 \cdot out \cdot envt)\\
\widehat{wellbeing} &amp;= -3.4    + (12.3 \cdot out)     + (20.3 \cdot envt)    + (-9.6 \cdot out \cdot envt)\\
\end{align}
\]</span></p>
<p>When <span class="math inline">\(envt = 0\)</span> (nature):</p>
<p><span class="math display">\[
\begin{align}
\widehat{wellbeing}_{nature} &amp;= -3.4    + (12.3 \cdot out)     + (20.3 \cdot envt)    + (-9.6 \cdot out \cdot envt)\\
\widehat{wellbeing}_{nature} &amp;= -3.4    + (12.3 \cdot out)     + (20.3 \cdot 0)    + (-9.6 \cdot out \cdot 0)\\
\widehat{wellbeing}_{nature} &amp;= -3.4    + (12.3 \cdot out)\\
\end{align}
\]</span></p>
<p>When <span class="math inline">\(envt = 1\)</span> (urban):</p>
<p><span class="math display">\[
\begin{align}
\widehat{wellbeing}_{urban} &amp;= -3.4    + (12.3 \cdot out)     + (20.3 \cdot envt)    + (-9.6 \cdot out \cdot envt)\\
\widehat{wellbeing}_{urban} &amp;= -3.4    + (12.3 \cdot out)     + (20.3 \cdot 1)    + (-9.6 \cdot out \cdot 1)\\
\widehat{wellbeing}_{urban} &amp;= -3.4 + 20.3   + (12.3 \cdot out) + (-9.6 \cdot out)\\
\widehat{wellbeing}_{urban} &amp;= 16.9   + (12.3 \cdot out) + (-9.6 \cdot out)\\
\widehat{wellbeing}_{urban} &amp;= 16.9   + ((12.3 - 9.6) \cdot out) \\
\widehat{wellbeing}_{urban} &amp;= 16.9   + (2.7 \cdot out)\\
\end{align}
\]</span></p>
<!-- :::: {.columns} -->
<!-- ::: {.column width="50%"} -->
<!-- a -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- b -->
<!-- ::: -->
<!-- :::: -->
<!-- style="font-size: 125%;" -->

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/reveal-attribution/attribution.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="dapr2_11_ixn_nc_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1294,

        height: 1000,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, RevealAttribution, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <style>
      .hide {
        display: none !important;
      }
    </style>


    <script>
      function remove() {
        let footer = document.querySelector('div.footer');
        let slideNo = document.querySelector('div.slide-number');
        slideNo.classList.add('hide');
        footer.classList.add('hide');
      
        Reveal.on('slidechanged', event => {  
          if(Reveal.isFirstSlide()) {
            slideNo.classList.add('hide');
            footer.classList.add('hide');
          } else {
            slideNo.classList.remove('hide');
            footer.classList.remove('hide');
          }
        });
      }
      
      window.onload = remove();
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
            let selectedAnnoteEl;
            const selectorForAnnotation = ( cell, annotation) => {
              let cellAttr = 'data-code-cell="' + cell + '"';
              let lineAttr = 'data-code-annotation="' +  annotation + '"';
              const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
              return selector;
            }
            const selectCodeLines = (annoteEl) => {
              const doc = window.document;
              const targetCell = annoteEl.getAttribute("data-target-cell");
              const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
              const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
              const lines = annoteSpan.getAttribute("data-code-lines").split(",");
              const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
              })
              let top = null;
              let height = null;
              let parent = null;
              if (lineIds.length > 0) {
                  //compute the position of the single el (top and bottom and make a div)
                  const el = window.document.getElementById(lineIds[0]);
                  top = el.offsetTop;
                  height = el.offsetHeight;
                  parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                  const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
                  const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                  height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                  // cook up a div (if necessary) and position it 
                  let div = window.document.getElementById("code-annotation-line-highlight");
                  if (div === null) {
                    div = window.document.createElement("div");
                    div.setAttribute("id", "code-annotation-line-highlight");
                    div.style.position = 'absolute';
                    parent.appendChild(div);
                  }
                  div.style.top = top - 2 + "px";
                  div.style.height = height + 4 + "px";
                  div.style.left = 0;
                  let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
                  if (gutterDiv === null) {
                    gutterDiv = window.document.createElement("div");
                    gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                    gutterDiv.style.position = 'absolute';
                    const codeCell = window.document.getElementById(targetCell);
                    const gutter = codeCell.querySelector('.code-annotation-gutter');
                    gutter.appendChild(gutterDiv);
                  }
                  gutterDiv.style.top = top - 2 + "px";
                  gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
              }
            };
            const unselectCodeLines = () => {
              const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
              elementsIds.forEach((elId) => {
                const div = window.document.getElementById(elId);
                if (div) {
                  div.remove();
                }
              });
              selectedAnnoteEl = undefined;
            };
              // Handle positioning of the toggle
          window.addEventListener(
            "resize",
            throttle(() => {
              elRect = undefined;
              if (selectedAnnoteEl) {
                selectCodeLines(selectedAnnoteEl);
              }
            }, 10)
          );
          function throttle(fn, ms) {
          let throttle = false;
          let timer;
            return (...args) => {
              if(!throttle) { // first call gets through
                  fn.apply(this, args);
                  throttle = true;
              } else { // all the others get throttled
                  if(timer) clearTimeout(timer); // cancel #2
                  timer = setTimeout(() => {
                    fn.apply(this, args);
                    timer = throttle = false;
                  }, ms);
              }
            };
          }
            const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
            for (let i=0; i<annoteTargets.length; i++) {
              const annoteTarget = annoteTargets[i];
              const targetCell = annoteTarget.getAttribute("data-target-cell");
              const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
              const contentFn = () => {
                const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
                if (content) {
                  const tipContent = content.cloneNode(true);
                  tipContent.classList.add("code-annotation-tip-content");
                  return tipContent.outerHTML;
                }
              }
              const config = {
                allowHTML: true,
                content: contentFn,
                onShow: (instance) => {
                  selectCodeLines(instance.reference);
                  instance.reference.classList.add('code-annotation-active');
                  window.tippy.hideAll();
                },
                onHide: (instance) => {
                  unselectCodeLines();
                  instance.reference.classList.remove('code-annotation-active');
                },
                maxWidth: 300,
                delay: [50, 0],
                duration: [200, 0],
                offset: [5, 10],
                arrow: true,
                appendTo: function(el) {
                  return el.parentElement.parentElement.parentElement;
                },
                interactive: true,
                interactiveBorder: 10,
                theme: 'light-border',
                placement: 'right',
                popperOptions: {
                  modifiers: [
                  {
                    name: 'flip',
                    options: {
                      flipVariations: false, // true by default
                      allowedAutoPlacements: ['right'],
                      fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
                    },
                  },
                  {
                    name: 'preventOverflow',
                    options: {
                      mainAxis: false,
                      altAxis: false
                    }
                  }
                  ]        
                }      
              };
              window.tippy(annoteTarget, config); 
            }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>
---
title: "Effects coding and manual post-hoc contrasts"
author: "Elizabeth Pankratz (elizabeth.pankratz@ed.ac.uk)"
editor_options: 
  chunk_output_type: console
---

```{r}
#| label: setup
#| include: false
library(tidyverse)
library(patchwork)
source('_theme/theme_quarto.R')
```


## Course Overview {.smaller}

<br>

:::: {.columns}

::: {.column width="50%"}

```{r echo = FALSE, results='asis', warning = FALSE}
block1_name = "Introduction to Linear Models"
block1_lecs = c("Intro to Linear Regression",
                "Interpreting Linear Models",
                "Testing Individual Predictors",
                "Model Testing & Comparison",
                "Linear Model Analysis")
block2_name = "Analysing Experimental Studies"
block2_lecs = c("Categorical Predictors & Dummy Coding",
                "	Effects Coding & Coding Specific Contrasts",
                "Assumptions & Diagnostics",
                "Bootstrapping",
                "	Categorical Predictor Analysis")

source("https://raw.githubusercontent.com/uoepsy/junk/main/R/course_table.R")

course_table(block1_name,block2_name,block1_lecs,block2_lecs,week = 7)
```

:::

::: {.column width="50%"}

```{r echo = FALSE, results='asis', warning = FALSE}
block3_name = "Interactions"
block3_lecs = c("Interactions I",
                "Interactions II",
                "Interactions III",
                "Analysing Experiments",
                "Interaction Analysis")
block4_name = "Advanced Topics"
block4_lecs = c("Power Analysis",
                "Binary Logistic Regression I",
                "Binary Logistic Regression II",
                "Logistic Regression Analysis",
                "	Exam Prep and Course Q&A")

source("https://raw.githubusercontent.com/uoepsy/junk/main/R/course_table.R")

course_table(block3_name,block4_name,block3_lecs,block4_lecs,week = 0)
```

:::

::::

## This week's learning objectives

<br>

::: {.fragment}
::: {.dapr2callout}
x
:::
:::

::: {.fragment}
::: {.dapr2callout}
x
:::
:::

::: {.fragment}
::: {.dapr2callout}
x
:::
:::


## Building an analysis workflow

<br> 

::: {.r-stack}
![](figs/block2-flowchart-07-0.svg){.fragment height="550" }

![](figs/block2-flowchart-07-1.svg){.fragment height="550" }

:::





## Revisiting this week's learning objectives

::: {}
::: {.dapr2callout}
**Dummy coding is one common scheme for *a priori* contrast coding. What's another common scheme, and how is it different?**

::: {style="font-size: 80%;"}
- Effects coding, also called sum-to-zero coding (or just "sum coding").
- Dummy coding uses 0/1, and one level of the predictor (the one coded as 0) is the reference level.
- Effects coding uses â€“1/1, and there is no reference level.
:::

:::
:::

::: {}
::: {.dapr2callout}
**When we code predictors using this other coding scheme, how do we interpret the linear model's coefficients?**

::: {style="font-size: 80%;"}
- Intercept (also written as $\beta_0$): The grand mean of the outcome (grand mean = the mean of every group's mean).
- Slope (also written as $\beta_1$, $\beta_2$, etc., or for short, $\beta_j$): The difference between (1) the mean of a group and (2) the grand mean, when all other predictors are at zero.
:::

:::
:::

## Revisiting this week's learning objectives


::: {}
::: {.dapr2callout}
**In this other coding scheme, what hypotheses are tested for each coefficient?**

::: {style="font-size: 80%;"}
- The intercept's hypothesis test: The grand mean of the outcome is different from zero.
- The slopes' hypothesis tests: The difference between (1) the mean of each individual group and (2) the grand mean is different from zero.
:::

:::
:::

::: {}
::: {.dapr2callout}
**How can we test hypotheses other than the ones tested by *a priori* coding schemes?**

::: {style="font-size: 80%;"}
- Use a linear model to generate the expected outcome values for every level of our predictors (= the expected marginal means).
- We can compare expected marginal means of any combination of groups we want by manually creating our own contrasts.
- There is a step-by-step process we can follow to create any contrasts we want.
:::

:::
:::





## This week 

<br>

:::: {.columns}
::: {.column width="50%"}

### Tasks

<br>

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/labs.svg')
```

**Attend your lab and work together on the exercises** 

:::
::: {.column width="50%"}

### Support

<br>

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/forum.svg')
```

**Help each other on the Piazza forum**

:::
::::

<br>

:::: {.columns}
::: {.column width="50%"}

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/exam.svg')
```

**Complete the weekly quiz**

:::
::: {.column width="50%"}

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/oh.png')
```

**Attend office hours (see Learn page for details)**

:::
::::








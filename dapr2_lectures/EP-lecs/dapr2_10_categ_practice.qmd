---
title: "Practice analysis:<br>Categorical predictors"
editor_options: 
  chunk_output_type: console
format:
  revealjs:
    smaller: true
---

```{r}
#| label: setup
#| include: false
library(tidyverse)
library(patchwork)
source('_theme/theme_quarto.R')
```


# Course Overview

<br>

:::: {.columns}

::: {.column width="50%"}

```{r echo = FALSE, results='asis', warning = FALSE}
block1_name = "Introduction to Linear Models"
block1_lecs = c("Intro to Linear Regression",
                "Interpreting Linear Models",
                "Testing Individual Predictors",
                "Model Testing & Comparison",
                "Linear Model Analysis")
block2_name = "Analysing Experimental Studies"
block2_lecs = c("Categorical Predictors & Dummy Coding",
                "	Effects Coding & Coding Specific Contrasts",
                "Assumptions & Diagnostics",
                "Bootstrapping",
                "	Categorical Predictor Analysis")

source("https://raw.githubusercontent.com/uoepsy/junk/main/R/course_table.R")

course_table(block1_name,block2_name,block1_lecs,block2_lecs,week = 10)
```

:::

::: {.column width="50%"}

```{r echo = FALSE, results='asis', warning = FALSE}
block3_name = "Interactions"
block3_lecs = c("Interactions I",
                "Interactions II",
                "Interactions III",
                "Analysing Experiments",
                "Interaction Analysis")
block4_name = "Advanced Topics"
block4_lecs = c("Power Analysis",
                "Binary Logistic Regression I",
                "Binary Logistic Regression II",
                "Logistic Regression Analysis",
                "	Exam Prep and Course Q&A")

source("https://raw.githubusercontent.com/uoepsy/junk/main/R/course_table.R")

course_table(block3_name,block4_name,block3_lecs,block4_lecs,week = 0)
```

:::
::::


# The game plan for this week

## The game plan for this week

<br>

:::: {.columns}
::: {.column width="15%"}

{{< iconify mdi lecture size=4em >}}

:::
::: {.column width="85%"}
**Lectures:**

Together, we'll practice the full analysis workflow we've developed this semester.

We have three examples we can work through—we'll see how far we get!
:::
::::

<br>

:::: {.columns}
::: {.column width="15%"}

<!-- {{< iconify heroicons-solid user-group size=4em >}} -->
{{< iconify streamline-ultimate paper-write-bold size=4em >}}


:::
::: {.column width="85%"}
**Labs:**

You'll practice writing up these analyses as a report.
:::
::::









# Review: The analysis workflow

## The analysis workflow

<br> 

::: {.r-stack}
![](figs/block2-flowchart-10-0.svg){.fragment height="550" }

![](figs/block2-flowchart-10-1.svg){.fragment height="550" }

![](figs/block2-flowchart-10-2.svg){.fragment height="550" }

![](figs/block2-flowchart-10-3.svg){.fragment height="550" }

![](figs/block2-flowchart-10-4.svg){.fragment height="550" }

![](figs/block2-flowchart-10-5.svg){.fragment height="550" }

:::

# Research questions and data

## Research questions and data

:::: {.columns}
::: {.column width="40%"}

:::{.dapr2callout style="font-size: 125%"}
**RQ1:** Do conscientiousness, frequency of accessing online materials, and year of study in University predict course attendance?
:::

:::{.dapr2callout style="font-size: 125%;"}
**RQ2:** Is there a difference in attendance between those with early/late classes in comparison to those with midday classes?
:::


:::
::: {.column width="60%"}
:::{.dapr2callout}
Dataframe called `data1` containing:

- `pid`: Participant ID number
- `Attendance`: Total attendance (in days)
- `Conscientiousness`: Conscientiousness (Levels: Low, Moderate, High)
- `Time`: Time of class (Levels: 9AM, 10AM, 11AM, 12PM, 1PM, 2PM, 3PM, 4PM)
- `OnlineAccess`:	Frequency of access to online course materials (Levels: Rarely, Sometimes, Often)
- `Year`:	Year of study in university (Levels: Y1, Y2, Y3, Y4, MSc, PhD)
:::
:::
::::


:::: {.columns}
::: {.column width="40%"}

:::{.dapr2callout style="font-size: 125%;"}
**RQ3:** Is class attendance associated with final grades?
:::

:::
::: {.column width="60%"}
:::{.dapr2callout}
Dataframe called `data2` containing:

- `Marks`: Final grade (0–100)
- `Attendance`: Total attendance (in days)
:::
:::
::::


<br>





# I will live code, but <br> you'll tell me what to do


## All analysis steps, in three phases

**Not every analysis requires every step.**

Think of all these steps like a buffet that you can pick and choose from.

<br>

:::{.dapr2callout}
**(1) Before model fitting:** 

- Identify the relevant variables
- Get summary statistics for the relevant variables
- Plot each relevant variable individually
- Set up categorical predictors (e.g., what a priori coding scheme?)
- Set up continuous predictors (e.g., any transformations?)
- Plot the relevant variables together
- Think what the model coefficients might look like
:::

:::{.dapr2callout}
**(2) Model fitting:** 

- Fit the linear model to the data
:::


## All analysis steps, in three phases

<br>

:::{.dapr2callout}
**(3) After model fitting:** 

- Interpret the model coefficients
- Check model assumptions 
- Run diagnostics for unusual data points
- Run diagnostics for multicollinearity
- Run sensitivity analysis
- Bootstrap the linear model
- Get estimated marginal means
- Create and test manual contrasts
- Plot estimated marginal means
:::


## Vote on the next step on Wooclap: RQ1

<br>
<br>
<br>

:::{.hcenter style="font-size: 200%;"}

**RQ1:** `wooclap.com`, enter code `FJAKCO`

:::


## Vote on the next step on Wooclap: RQ2

<br>
<br>
<br>

:::{.hcenter style="font-size: 200%;"}

**RQ2:** `wooclap.com`, enter code `YRPLZU`

:::


## Vote on the next step on Wooclap: RQ3

<br>
<br>
<br>

:::{.hcenter style="font-size: 200%;"}

**RQ3:** `wooclap.com`, enter code `MUSROM`

:::




## This week 

<br>

:::: {.columns}
::: {.column width="50%"}

### Tasks

<br>

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/labs.svg')
```

**Attend your lab and work together on the exercises** 

:::
::: {.column width="50%"}

### Support

<br>

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/forum.svg')
```

**Help each other on the Piazza forum**

:::
::::

<br>

:::: {.columns}
::: {.column width="50%"}

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/exam.svg')
```

**Complete the weekly quiz**

:::
::: {.column width="50%"}

```{r, echo = F, out.width='15%'}
knitr::include_graphics('figs/oh.png')
```

**Attend office hours (see Learn page for details)**

:::
::::


# Appendix {.appendix}

## The complete buffet of analysis steps

:::{style="font-size: 80%;"}
**(1) Before model fitting:** 

- Identify the relevant variables
- Get summary statistics for the relevant variables
- Plot each relevant variable individually
- Set up categorical predictors (e.g., what a priori coding scheme?)
- Set up continuous predictors (e.g., any transformations?)
- Plot the relevant variables together
- Think what the model coefficients might look like

**(2) Model fitting:** 

- Fit the linear model to the data

**(3) After model fitting:** 

- Interpret the model coefficients
- Check model assumptions 
- Run diagnostics for unusual data points
- Run diagnostics for multicollinearity
- Run sensitivity analysis
- Bootstrap the linear model
- Get estimated marginal means
- Create and test manual contrasts
- Plot estimated marginal means



<!-- :::: {.columns} -->
<!-- ::: {.column width="50%"} -->
<!-- a -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- b -->
<!-- ::: -->
<!-- :::: -->

<!-- style="font-size: 125%;" -->

<!-- {{< iconify codicon thumbsup-filled size=1em >}} {{< iconify codicon thumbsdown-filled size=1em >}} -->